### 05.24

将引用论文和共现次数>=k的论文节点特征先采用图注意力聚合到目标item节点上，再进行改进的图注意力机制更新user和item信息。效果有提升。

现在评价指标的值和之前找的论文中的结果差距较大，不好直接进行比较。另外Precition和Recall的值较低，可能有问题，还需要检查一下。

还有，现在将引用论文和共现次数>=k的论文节点特征聚合到目标item节点上采用的是普通的图注意力，可以尝试改成论文Graph-Refined Convolutional Network for Multimedia Recommendation with Implicit Feedback中的改进的图注意力机制试一下。

|                                       | Precition  | Recall     | NDCG       |
| ------------------------------------- | ---------- | ---------- | ---------- |
| 只使用user和item信息                  | 0.0783     | 0.1225     | 0.2565     |
| 加入引用信息                          | 0.0810     | 0.1275     | 0.2650     |
| 加入sim最高的9个                      | 0.0796     | 0.1263     | 0.2648     |
| 加入共现次数>=3论文信息               | 0.0827     | 0.1298     | **0.2676** |
| 加入共现次数>=4论文信息               | 0.0818     | **0.1304** | 0.2672     |
| 加入共现次数>=5论文信息               | 0.0806     | 0.1266     | 0.2669     |
| 同时加入引用信息和共现次数>=3论文信息 | 0.0830     | 0.1315     | 0.2715     |
| 同时加入引用信息和共现次数>=4论文信息 | **0.0834** | **0.1338** | **0.2731** |
| 同时加入引用信息和共现次数>=5论文信息 | 0.0818     | 0.1313     | 0.2672     |

## 05.28

把共现次数>=4论文看做困难负样本，因为任意两个item如果和多个用户都同时有交互，那么可以认为这两个item有一定的相关性，而在其它用户处只和其中一个item进行交互，那么可以认为对于这个用户来说，另一个item是他的困难负样本。在选取负样本时提高选取他们的比例，评价指标有所提升。

因为修改后的代码中的 Recall 和 Precition较低，所以我尝试将 LATTICE 论文代码中的评价指标部分换到GRCN代码中，结果有点问题，评价指标全都很低，正在修改代码。



top10推荐

|                                                              | Precition  | Recall     | NDCG       |
| ------------------------------------------------------------ | ---------- | ---------- | ---------- |
| 只使用user和item信息((GRCN源代码)，20年论文                  | 0.0783     | 0.1225     | 0.2565     |
| （GRCN修改）同时加入引用信息和共现次数>=4论文信息            | **0.0834** | **0.1338** | **0.2731** |
| （LATTICE代码）21年论文                                      | 0.11146    | 0.20104    | 0.26485    |
| （GRCN修改）加入引用信息和共现次数>=4论文信息，加入困难负样本 | 0.0905     | 0.1465     | 0.2916     |



LATTICE代码top[10,20,30,40,50]推荐结果

recall=[0.20104, 0.28290,0.34269, 0.38250, 0.41706], precision=[0.11146, 0.08390,0.07004, 0.05948, 0.05215], hit=[0.56422, 0.67429,0.74095, 0.77842, 0.80850], ndcg=[0.26485, 0.31561,0.34973, 0.37242, 0.39093]



